!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=this;return t+=" check the documentation at https://www.360-javascriptviewer.com/installation",(n=e.call(this,t)||this).name="360 Javascript Viewer InputError",n}return i(t,e),t}(Error);t.default=o},function(e,t,n){"use strict";function r(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=Math.atan2(r,n);return i>=0?i:i+2*Math.PI}function i(e,t,n){var r=e.clientX,i=e.clientY;return{clientX:r,clientY:i,deltaX:r-t.clientX,deltaY:i-t.clientY,distX:r-n.clientX,distY:i-n.clientY}}function o(e){for(var t=Math.min(e.length,2),n=[],r=0;r<t;++r)n.push(a(e[r]));return n}function a(e){return{clientX:e.clientX,clientY:e.clientY}}function s(e){return 1===e.length?e[0]:{clientX:(e[0].clientX+e[1].clientX)/2,clientY:(e[0].clientY+e[1].clientY)/2}}function u(e,t){return{clientX:e.clientX+t.clientX,clientY:e.clientY+t.clientY}}function c(e,t){return{clientX:e.clientX-t.clientX,clientY:e.clientY-t.clientY}}Object.defineProperty(t,"__esModule",{value:!0}),t.now=t.removeEvent=t.addEvent=t.minusClient=t.plueClient=t.getAverageClient=t.getClient=t.getClients=t.getPositions=t.getDist=t.getPosition=t.getPositionEvent=t.isMultiTouch=t.getPinchDragPosition=t.getRotation=t.getRandomId=t.getRad=void 0,t.getRad=r,t.getRandomId=function(){return"_"+Math.random().toString(36).substr(2,9)},t.getRotation=function(e){return r([e[0].clientX,e[0].clientY],[e[1].clientX,e[1].clientY])/Math.PI*180},t.getPinchDragPosition=function(e,t,n,r){var o=s(e),a=s(t),l=s(r);return i(u(r[0],c(o,l)),u(r[0],c(a,l)),n[0])},t.isMultiTouch=function(e){return e.touches&&e.touches.length>=2},t.getPositionEvent=function(e){return e.touches?o(e.touches):[a(e)]},t.getPosition=i,t.getDist=function(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))},t.getPositions=function(e,t,n){return e.map((function(e,r){return i(e,t[r],n[r])}))},t.getClients=o,t.getClient=a,t.getAverageClient=s,t.plueClient=u,t.minusClient=c,t.addEvent=function(e,t,n,r){e.addEventListener(t,n,r)},t.removeEvent=function(e,t,n){e.removeEventListener(t,n)},t.now=function(){return Date.now?Date.now():(new Date).getTime()}},function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(2),s=function(){throw new Error("Slot not connected")};t.defaultSlotConfig={noBuffer:!1};var u=function(e){return Object.assign((function(){return s()}),{config:e,lazy:function(){return s},on:function(){return s},slotName:"Not connected"})},c=function(e,t){return Object.keys(t).reduce((function(n,r){return n.concat(t[r][e]||[])}),[])},l=function(e){return Object.keys(e).reduce((function(t,n){var r=e[n],o=Object.keys(r).filter((function(e){return(r[e]||[]).length>0})),a=[].concat(i(t),i(o));return[].concat(i(new Set(a)))}),[])};t.slot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.defaultSlotConfig;return u(e)},t.connectSlot=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=t.reduce((function(e,t,n){return Object.assign({},e,r({},n,{}))}),r({},"LOCAL_TRANSPORT",{})),u=t.reduce((function(e,t,n){return Object.assign({},e,r({},n,{}))}),{}),h=function(e,t){var n=function(){},r=new Promise((function(e){return n=e}));u[e][t]={registered:r,onRegister:n}},d=[],f=[],p=function(e){return d.forEach((function(t){return t(e)}))},g=function(e){return f.forEach((function(t){return t(e)}))};function m(e,r){var l=2===arguments.length,d=l?r:e,f=l?e:a.DEFAULT_PARAM;if(n.noBuffer||0===t.length){var p=c(f,s);return o.callHandlers(d,p)}t.forEach((function(e,t){u[t][f]||h(String(t),f)}));var g=t.reduce((function(e,t,n){return[].concat(i(e),[u[n][f].registered])}),[]);return Promise.all(g).then((function(){var e=c(f,s);return o.callHandlers(d,e)}))}function v(e,t){return d.push(e),f.push(t),l(s).forEach(e),function(){l(s).forEach(t);var n=d.indexOf(e);n>-1&&d.splice(n,1);var r=f.indexOf(t);r>-1&&f.splice(r,1)}}function y(n,r){var i="",o=function(){return new Promise((function(e){return e()}))};return"string"==typeof n?(i=n,o=r||o):(i=a.DEFAULT_PARAM,o=n),t.forEach((function(t){return t.registerHandler(e,i,o)})),s.LOCAL_TRANSPORT[i]=(s.LOCAL_TRANSPORT[i]||[]).concat(o),1===c(i,s).length&&p(i),function(){t.forEach((function(t){return t.unregisterHandler(e,i,o)}));var n=(s.LOCAL_TRANSPORT[i]||[]).indexOf(o);-1!==n&&s.LOCAL_TRANSPORT[i].splice(n,1),0===c(i,s).length&&g(i)}}return t.forEach((function(t,n){t.addRemoteHandlerRegistrationCallback(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.DEFAULT_PARAM,t=arguments[1],r=s[n][e]||[];s[n][e]=r.concat(t),1===c(e,s).length&&p(e),u[n][e]||h(String(n),e),u[n][e].onRegister()})),t.addRemoteHandlerUnregistrationCallback(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.DEFAULT_PARAM,t=arguments[1],r=s[n][e]||[],i=r.indexOf(t);i>-1&&s[n][e].splice(i,1),0===c(e,s).length&&g(e),h(String(n),e)}))})),Object.assign(m,{on:y,lazy:v,config:n,slotName:e})}},function(e,t,n){"use strict";function r(e,t){var n=null;try{n=e(t)}catch(e){return Promise.reject(e)}return n&&n.then?n:Promise.resolve(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.callHandlers=function(e,t){return t&&0!==t.length?1===t.length?r(t[0],e):Promise.all(t.map((function(t){return r(t,e)}))):new Promise((function(e){}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PARAM="$_DEFAULT_$"},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;i(this,e),this._timeout=t,this._onMessageCallbacks=[],this._onConnectCallbacks=[],this._onDisconnectCallbacks=[],this._onErrorCallbacks=[],this._ready=!1}return r(e,[{key:"onData",value:function(e){-1===this._onMessageCallbacks.indexOf(e)&&this._onMessageCallbacks.push(e)}},{key:"onConnect",value:function(e){this._ready&&e(),this._onConnectCallbacks.push(e)}},{key:"onDisconnect",value:function(e){this._onDisconnectCallbacks.push(e)}},{key:"onError",value:function(e){this._onErrorCallbacks.push(e)}},{key:"_messageReceived",value:function(e){this._onMessageCallbacks.forEach((function(t){return t(e)}))}},{key:"_error",value:function(e){this._onErrorCallbacks.forEach((function(t){return t(e)}))}},{key:"_connected",value:function(){this._ready=!0,this._onConnectCallbacks.forEach((function(e){return e()}))}},{key:"_disconnected",value:function(){this._ready=!1,this._onDisconnectCallbacks.forEach((function(e){return e()}))}},{key:"timeout",get:function(){return this._timeout}}]),e}();t.GenericChannel=o},function(e,t,n){e.exports=n(5)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.slot=r.slot;var i=n(6);t.combineEvents=i.combineEvents,t.createEventBus=i.createEventBus;var o=n(3);t.GenericChannel=o.GenericChannel;var a=n(8);t.ChunkedChannel=a.ChunkedChannel;var s=n(2);t.DEFAULT_PARAM=s.DEFAULT_PARAM},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(7);t.combineEvents=function(e,t,n,i,o,a,s,u,c,l,h,d,f,p,g,m,v,y,w,b,_,E,I,D){var P=Array.from(arguments),C=P.reduce((function(e,t){return[].concat(r(e),r(Object.keys(t)))}),[]),R=[].concat(r(new Set(C)));if(C.length>R.length)throw new Error("ts-event-bus: duplicate slots encountered in combineEvents.");return Object.assign.apply(Object,[{}].concat(r(P)))},t.createEventBus=function(e){var t=(e.channels||[]).map((function(e){return new o.Transport(e)}));return Object.keys(e.events).reduce((function(n,r){var o=e.events[r].config;return n[r]=i.connectSlot(r,t,o),n}),{})}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=0,a=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._channel=t,this._localHandlers={},this._localHandlerRegistrations={},this._remoteHandlers={},this._remoteHandlerRegistrationCallbacks={},this._remoteHandlerDeletionCallbacks={},this._pendingRequests={},this._channelReady=!1,this._channel.onData((function(e){switch(e.type){case"request":return n._requestReceived(e);case"response":return n._responseReceived(e);case"handler_registered":return n._registerRemoteHandler(e);case"handler_unregistered":return n._unregisterRemoteHandler(e);case"error":return n._errorReceived(e);default:!function(e){throw new Error("Should not happen: "+e)}(e)}})),this._channel.onConnect((function(){n._channelReady=!0,Object.keys(n._localHandlerRegistrations).forEach((function(e){n._localHandlerRegistrations[e].forEach((function(e){n._channel.send(e)}))}))})),this._channel.onDisconnect((function(){n._channelReady=!1,n._unregisterAllRemoteHandlers(),n._rejectAllPendingRequests(new Error("REMOTE_CONNECTION_CLOSED"))})),this._channel.onError((function(e){return n._rejectAllPendingRequests(e)}))}return r(e,[{key:"_requestReceived",value:function(e){var t=this,n=e.slotName,r=e.data,o=e.id,a=e.param,s=this._localHandlers[n];if(s){var u=s[a];u&&i.callHandlers(r,u).then((function(e){return t._channel.send({type:"response",slotName:n,id:o,data:e,param:a})})).catch((function(e){return t._channel.send({id:o,message:""+e,param:a,slotName:n,stack:e.stack||"",type:"error"})}))}}},{key:"_responseReceived",value:function(e){var t=e.slotName,n=e.data,r=e.id,i=e.param,o=this._pendingRequests[t];o&&o[i]&&o[i][r]&&(o[i][r].resolve(n),delete o[i][r])}},{key:"_errorReceived",value:function(e){var t=e.slotName,n=e.id,r=e.message,i=e.stack,o=e.param,a=this._pendingRequests[t];if(a&&a[o]&&a[o][n]){var s=new Error(r+" on "+t+" with param "+o);s.stack=i||s.stack,this._pendingRequests[t][o][n].reject(s),delete this._pendingRequests[t][o][n]}}},{key:"_registerRemoteHandler",value:function(e){var t=this,n=e.slotName,r=e.param,i=this._remoteHandlerRegistrationCallbacks[n];if(i){var a=this._remoteHandlers[n];if(!a||!a[r]){var s=function(e){return new Promise((function(i,a){if(!t._channelReady)return a(new Error("CHANNEL_NOT_READY on "+n));var s=""+o++;t._pendingRequests[n]=t._pendingRequests[n]||{},t._pendingRequests[n][r]=t._pendingRequests[n][r]||{},t._pendingRequests[n][r][s]={resolve:i,reject:a},t._channel.send({type:"request",id:s,slotName:n,param:r,data:e}),setTimeout((function(){var e=((t._pendingRequests[n]||{})[r]||{})[s];if(e){var i=new Error("TIMED_OUT on "+n+" with param "+r);e.reject(i),delete t._pendingRequests[n][r][s]}}),t._channel.timeout)}))};this._remoteHandlers[n]=this._remoteHandlers[n]||{},this._remoteHandlers[n][r]=s,i(r,s)}}}},{key:"_unregisterRemoteHandler",value:function(e){var t=e.slotName,n=e.param,r=this._remoteHandlerDeletionCallbacks[t],i=this._remoteHandlers[t];if(i){var o=i[n];o&&r&&(r(n,o),delete this._remoteHandlers[t][n])}}},{key:"_unregisterAllRemoteHandlers",value:function(){var e=this;Object.keys(this._remoteHandlerDeletionCallbacks).forEach((function(t){var n=e._remoteHandlers[t];n&&Object.keys(n).filter((function(e){return n[e]})).forEach((function(n){return e._unregisterRemoteHandler({slotName:t,param:n})}))}))}},{key:"_rejectAllPendingRequests",value:function(e){var t=this;Object.keys(this._pendingRequests).forEach((function(n){Object.keys(t._pendingRequests[n]).forEach((function(r){Object.keys(t._pendingRequests[n][r]).forEach((function(i){t._pendingRequests[n][r][i].reject(e)}))})),t._pendingRequests[n]={}}))}},{key:"addRemoteHandlerRegistrationCallback",value:function(e,t){this._remoteHandlerRegistrationCallbacks[e]||(this._remoteHandlerRegistrationCallbacks[e]=t)}},{key:"addRemoteHandlerUnregistrationCallback",value:function(e,t){this._remoteHandlerDeletionCallbacks[e]||(this._remoteHandlerDeletionCallbacks[e]=t)}},{key:"registerHandler",value:function(e,t,n){if(this._localHandlers[e]=this._localHandlers[e]||{},this._localHandlers[e][t]=this._localHandlers[e][t]||[],this._localHandlers[e][t].push(n),1===this._localHandlers[e][t].length){var r={type:"handler_registered",param:t,slotName:e};this._localHandlerRegistrations[t]=this._localHandlerRegistrations[t]||[],this._localHandlerRegistrations[t].push(r),this._channelReady&&this._channel.send(r)}}},{key:"unregisterHandler",value:function(e,t,n){var r=this._localHandlers[e];if(r&&r[t]){var i=r[t].indexOf(n);if(i>-1&&(r[t].splice(i,1),0===r[t].length)){var o={type:"handler_unregistered",param:t,slotName:e};this._channelReady&&this._channel.send(o)}}}}]),e}();t.Transport=a},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=n(9),s=function(e){if(!e.chunkId)throw new Error("ChunkedMessage did not have a chunkId: "+JSON.stringify(e))},u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.timeout));return n._buffer={},n._chunkSize=e.chunkSize,n._sender=e.sender,n._maxStringAlloc=e.maxStringAlloc||-1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"send",value:function(e){var t=this,n=JSON.stringify(e);if(n.length<=this._chunkSize)this._sender(e);else{var r=function(e){for(var t=new Uint16Array(e.length),n=0,r=e.length;n<r;n++)t[n]=e.charCodeAt(n);return t}(n),i=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array(30))).map((function(){return Math.random().toString(36)[3]})).join("");this._sender({type:"chunk_start",chunkId:i,size:n.length}),!function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=r.slice(n,n+t._chunkSize);o.length&&(t._sender({type:"chunk_data",chunkId:i,data:Array.from(o)}),e(n+t._chunkSize))}(),this._sender({type:"chunk_end",chunkId:i})}}},{key:"_messageReceived",value:function(e){switch(e.type){case"chunk_start":this._receiveNewChunk(e);break;case"chunk_data":this._receiveChunkData(e);break;case"chunk_end":var n=this._mergeChunks(e);i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_messageReceived",this).call(this,n);break;default:i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_messageReceived",this).call(this,e)}}},{key:"_receiveNewChunk",value:function(e){if(s(e),this._buffer[e.chunkId])throw new Error("There was already an entry in the buffer for chunkId "+e.chunkId);this._buffer[e.chunkId]={id:e.chunkId,chunks:[],size:e.size}}},{key:"_receiveChunkData",value:function(e){if(s(e),!this._buffer[e.chunkId])throw new Error("ChunkId "+e.chunkId+" was not found in the buffer");this._buffer[e.chunkId].chunks.push(e.data)}},{key:"_mergeChunks",value:function(e){if(s(e),!this._buffer[e.chunkId])throw new Error("ChunkId "+e.chunkId+" was not found in the buffer");var t=this._buffer[e.chunkId].chunks.reduce((function(e,t,n){return t.forEach((function(t,n){return e.uintArray[e.currentIx+n]=t})),e.currentIx+=t.length,e}),{uintArray:new Uint16Array(this._buffer[e.chunkId].size),currentIx:0}),n=void 0,r=function(e,t){if(-1===t)return String.fromCharCode.apply(null,e);for(var n="",r=0;r<e.length;r+=t)r+t>e.length?n+=String.fromCharCode.apply(null,e.subarray(r)):n+=String.fromCharCode.apply(null,e.subarray(r,r+t));return n}(t.uintArray,this._maxStringAlloc);try{n=JSON.parse(r)}catch(e){throw new Error("Not a valid JSON string: "+r)}if(!a.isTransportMessage(n))throw new Error("Not a transport message: "+JSON.stringify(n));return n}}]),t}(o.GenericChannel);t.ChunkedChannel=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTransportMessage=function(e){switch(e.type){case"request":case"response":case"error":case"handler_unregistered":case"handler_registered":return!0;default:return!1}}}])},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.JavascriptViewer=void 0;var a=n(4),s=n(6),u=n(1),c=n(7),l=n(2),h=n(8),d=n(9),f=n(0),p=n(10),g={mainImageId:"jsv-image",mainHolderId:"jsv-holder",totalFrames:72,imageUrls:[],speed:80,inertia:20,defaultProgressBar:!0,firstImageNumber:1,imageUrlFormat:"",startFrameNo:1,reverse:!1,verbose:!1,autoRotate:0,autoRotateSpeed:0,autoRotateReverse:!1,enableImageEvents:!1,zoom:!1,stopAtEdges:!1,enableChangeImageEvent:!1},m=function(){function e(e){this.isStarted=!1,this.isDragged=!1,this.images=[],this.currentImageNumber=1,this.previousImageNumber=1,this.desiredRotationInDegrees=0,this.mainImage=null,this.mainHolderElement=null,this.uniqueId="",this.currentDegree=0,this.inAnimation=!1,this.desiredRotationInDegreesStartSlowingDown=null,this.useEasing=!0,this.updateInAction=!1,this.window=null,this.startDragInvocations=0,this.firstDrag=!1,this.standbyRefreshRate=40,this.previousTargetDegree=null,this.nAutoRotations=0,this.dragAllowed=!0,this.zoom=null,this.options=r(r({},g),e),this.eventBus=l.createEventBus({events:h.default,channels:[]}),this.runningInBrowser()&&(this.window="undefined"!=typeof window?window:null)}return e.prototype.runningInBrowser=function(){return"undefined"!=typeof window},e.prototype.events=function(){return this.eventBus},e.prototype.setSpeed=function(e){this.options.speed=e>99?99:e<1?1:e},e.prototype.setInertia=function(e){this.options.inertia=e>99?99:e<1?1:e},e.prototype.initProgressBar=function(){if(this.options.defaultProgressBar){a.Images.blurMainImage(this.options.mainImageId,this.window);var e=a.Images.createProgressBar(this.uniqueId,this.window,this.mainHolderElement),t=e[0],n=e[1],r=new d.default(0,t.firstChild);this.eventBus.loadImage.on((function(e){r.update(e.percentage)})),this.eventBus.started.on((function(){t.style.display="none",n.style.display="none"}))}},e.prototype.documentIsReady=function(){return"complete"===this.window.document.readyState},e.prototype.track=function(){if(!this.isLocalhost()){var e=btoa(this.window.location.href),t=new XMLHttpRequest;t.open("GET","https://www.360-javascriptviewer.com/tracking?t="+e,!0),t.send()}},e.prototype.isLocalhost=function(){var e=this.window.location.hostname,t=this.window.location.port;return Boolean(-1!==e.indexOf("dev.")||-1!==e.indexOf("beta.")||-1!==e.indexOf("file")||""!==t||"localhost"===e||"[::1]"===e||e.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},e.prototype.showFirst=function(){var e=this.images[this.getFirstImageIndex()];s.DomUtilities.showImage(e,this.window)},e.prototype.getFirstImageIndex=function(){return this.options.firstImageNumber&&this.options.firstImageNumber>0&&this.options.firstImageNumber-1<this.images.length?this.options.firstImageNumber-1:0},e.prototype.destroy=function(){return i(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){return[2,new Promise((function(t,n){try{if(e.isStarted){var r=e.window.document.getElementById(e.uniqueId);if(r&&s.DomUtilities.removeElement(r),e.options.defaultProgressBar){var i=e.window.document.getElementById("loader_"+e.uniqueId);s.DomUtilities.removeElement(i);var o=e.window.document.getElementById("link_"+e.uniqueId);s.DomUtilities.removeElement(o)}s.DomUtilities.showImage(e.mainImage,e.window),e.isStarted=!1,e.images=[],e.mainImage=null,e.mainHolderElement=null,t(!0)}else t(!1)}catch(e){n(e.message)}}))]}))}))},e.prototype.start=function(){return i(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return this.documentIsReady()?[3,2]:[4,new Promise((function(e){setTimeout((function(){e()}),1e3)})).then((function(){return e.start}))];case 1:t.sent(),t.label=2;case 2:return[2,new Promise((function(t,n){try{return e.isStarted&&n("Viewer "+e.uniqueId+" already started"),e.runningInBrowser()||n("Viewer "+e.uniqueId+" not started in browser"),e.options.autoRotate>0&&e.eventBus.started.on((function(t){t?e.autoRotate(e.options.autoRotate).then((function(){e.eventBus.endAutoRotate({currentDegree:e.currentDegree,currentImage:e.images[e.currentImageNumber-1],completed:!0})})).catch((function(){e.eventBus.endAutoRotate({currentDegree:e.currentDegree,currentImage:e.images[e.currentImageNumber-1],completed:!1})})):e.destroy().then((function(){e.reportWarning("Failed starting autorotate")})).catch((function(t){return e.reportError(t)}))})),e.eventBus.started.on((function(r){if(r)return e.track(),e.options.zoom&&(e.zoom=new p.DefaultZoom(e.window,e.images,e.mainHolderElement)),t(!0);e.destroy().then((function(){e.reportWarning("Failed starting viewer, returned to default state"),n(!1)})).catch((function(t){return e.reportError(t)}))})),e.eventBus.pinch.on((function(t){var n;e.options.zoom&&(e.dragAllowed=!1,null===(n=e.zoom)||void 0===n||n.pinch(t),setTimeout((function(){e.dragAllowed=!0}),1e3))})),e.eventBus.scroll.on((function(t){var n;e.options.zoom&&(null===(n=e.zoom)||void 0===n||n.scroll(t))})),e.mainImage=a.Images.getMainImage(e.options.mainImageId,e.window),e.mainHolderElement=s.DomUtilities.getMainHolderElement(e.options.mainHolderId,e.window),e.uniqueId=e.uniqueId||u.getRandomId(),0===e.images.length?(e.initProgressBar(),e.getImages().then((function(t){return i(e,void 0,void 0,(function(){var e,r=this;return o(this,(function(i){switch(i.label){case 0:return this.images=t,e=s.DomUtilities.getImageHolderElement(this.window,this.mainHolderElement,this.uniqueId),this.mainHolderElement.onmouseleave=function(){r.isDragged=!1},[4,this.prepareImageHolder(e).then((function(e){r.mainHolderElement.appendChild(e),s.DomUtilities.hideImageSlow(r.mainImage,r.window).then((function(){r.inAnimation||(s.DomUtilities.showImage(r.images[r.getFirstImageIndex()],r.window),r.currentImageNumber=r.options.firstImageNumber||1,r.previousImageNumber=r.options.firstImageNumber||1,r.setCurrentDegree(r.currentImageNumber)),r.isStarted=!0,r.eventBus.started(!0)})).catch((function(e){return console.log("error when preparing",e)}))})).catch((function(e){r.eventBus.started(!1),n(e)}))];case 1:return i.sent(),[2]}}))}))})).catch((function(t){e.eventBus.started(!1),e.reportError(t),n(t)}))):n("there are already some images")}catch(t){e.reportError(t.message)}}))]}}))}))},e.prototype.prepareImageHolder=function(e){return i(this,void 0,void 0,(function(){function t(e,t){return i(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:n=0,r.label=1;case 1:return n<e.length?[4,t(e[n],n,e)]:[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}var n,r=this;return o(this,(function(a){return n=[],[2,new Promise((function(a,u){return i(r,void 0,void 0,(function(){var r,i,u=this;return o(this,(function(o){switch(o.label){case 0:return r=[],i=function(t,r){(u.options.zoom||u.options.enableImageEvents)&&u.addZoomEvents(t),n.push(t),u.images[r].encoded="",e.appendChild(t)},[4,t(this.images,(function(e,t){var n=s.DomUtilities.getImageElement(e,u.window);r[r.length]=n.decode().then((function(){i.call(u,n,t)})).catch((function(e){u.reportWarning(e),i.call(u,n,t)}))}))];case 1:return o.sent(),Promise.all(r).then((function(){var t;(u.options.zoom||u.options.enableImageEvents)&&(null===(t=u.mainHolderElement)||void 0===t||t.addEventListener("wheel",u.onScroll.bind(u),{passive:!1})),new c.default(n,{container:u.mainHolderElement,dragstart:u.dragStart.bind(u),dragend:u.dragEnd.bind(u),drag:u.drag.bind(u),preventDefault:!1,events:["mouse","touch"]}),a(e)})),[2]}}))}))}))]}))}))},e.prototype.addZoomEvents=function(e){var t=this;e.addEventListener("click",this.onClick.bind(this)),this.onScale(e,(function(e,n){t.events().pinch({completed:!0,currentImage:t.images[t.currentImageNumber-1],currentDegree:t.currentDegree,originalEvent:n,scale:e})}))},e.prototype.onScale=function(e,t){var n;e.addEventListener("touchmove",(function(e){if(2===e.targetTouches.length){var r=Math.hypot(e.targetTouches[0].pageX-e.targetTouches[1].pageX,e.targetTouches[0].pageY-e.targetTouches[1].pageY);void 0===n&&(n=r),t(r/n,e)}}),{capture:!1,passive:!0}),e.addEventListener("touchend",(function(e){n=void 0}),{capture:!1,passive:!0})},e.prototype.onClick=function(e){this.events().click({currentDegree:this.currentDegree,currentImage:this.images[this.currentImageNumber-1],completed:!0,originalEvent:e})},e.prototype.onScroll=function(e){e.preventDefault(),this.events().scroll({currentDegree:this.currentDegree,currentImage:this.images[this.currentImageNumber-1],completed:!0,originalEvent:e})},e.prototype.reportError=function(e){e+=" | "+this.window.location.href,e+=" | "+JSON.stringify(this.options),console.error("360 Javascript Viewer: "+e);var t=btoa(e),n=new XMLHttpRequest;n.open("GET","https://www.360-javascriptviewer.com/err?t="+t,!0),n.send()},e.prototype.reportWarning=function(e){this.options.defaultProgressBar&&console.warn("360 Javascript Viewer: "+e)},e.prototype.updateImage=function(){var e=this;this.updateInAction=!0;if(0===this.desiredRotationInDegrees)return this.inAnimation=!1,this.updateInAction=!1,this.desiredRotationInDegreesStartSlowingDown=null,new Promise((function(t){t({currentDegree:e.currentDegree})}));var t,n=this.getNextImageNumber();if(this.options.stopAtEdges&&!this.inAnimation){var r=this.images.length;if(1===this.previousImageNumber&&n===r||this.previousImageNumber===r&&1===n)return this.desiredRotationInDegrees=0,this.updateInAction=!1,new Promise((function(t){t({currentDegree:e.currentDegree})}))}return this.setCurrentImage(n),(t=this.getCurrentRefreshRate(),new Promise((function(e){return setTimeout(e,t)}))).then((function(){return e.updateImage()}))},e.prototype.rotateDegrees=function(e){return this.inAnimation=!0,this.desiredRotationInDegrees=e,this.updateImage()},e.prototype.rotateToDegree=function(e,t,n){var r=this;if(void 0===t&&(t=!0),void 0===n&&(n=!0),this.inAnimation=!0,this.cancelCurrentActions(),this.useEasing=n,this.desiredRotationInDegrees=0,e=Math.round(e),this.previousTargetDegree===e||e===this.currentDegree)return new Promise((function(e){e({currentDegree:r.currentDegree})}));this.inAnimation=!0;var i=e>this.currentDegree?e-this.currentDegree:360-this.currentDegree+e,o=e<this.currentDegree?-1*(this.currentDegree-e):-1*(this.currentDegree+(360-e));return this.desiredRotationInDegrees=t&&Math.abs(o)<i?o:i,this.previousTargetDegree=e,this.updateImage()},e.prototype.cancelCurrentActions=function(){this.desiredRotationInDegrees=0,this.previousTargetDegree=null,this.nAutoRotations=0},e.prototype.dragEnd=function(){this.isDragged=!1},e.prototype.drag=function(e){if(Math.abs(e.deltaY)>Math.abs(e.deltaX))return this.window.scrollBy(0,-1*e.deltaY),!0;if(!this.dragAllowed)return!1;if(e instanceof TouchEvent&&2===e.touches.length)return!1;var t=(100-this.options.inertia)/100,n=e.deltaX*t*-1;return this.options.reverse&&(n*=-1),this.desiredRotationInDegrees+=n,this.updateInAction||this.updateImage(),this.firstDrag&&(this.startDragInvocations++,this.eventBus.startDragging({invocations:this.startDragInvocations}),this.firstDrag=!1),this.isDragged},e.prototype.dragStart=function(){this.dragAllowed&&(this.isDragged=!0,this.firstDrag=!0,this.cancelCurrentActions())},e.prototype.getNextImageNumber=function(){var e=this.images.length,t=this.getDegreesOneImage(),n=this.currentImageNumber;return Math.abs(this.desiredRotationInDegrees)<t||(n=this.desiredRotationInDegrees>0?this.increaseImageNumber(n,e):this.decreaseImageNumber(n,e),this.decreaseDesiredRotation(t)),n},e.prototype.getDegreesOneImage=function(){var e=this.images.length;return Math.round(360/e)},e.prototype.setCurrentDegree=function(e){var t=this.getDegreesOneImage();this.currentDegree=1===e?0:(e-1)*t},e.prototype.decreaseImageNumber=function(e,t){return--e<1?t:e},e.prototype.increaseImageNumber=function(e,t){return++e>t?1:e},e.prototype.decreaseDesiredRotation=function(e){e=Math.abs(e),this.desiredRotationInDegrees<0?this.desiredRotationInDegrees+=e:this.desiredRotationInDegrees-=Math.abs(e),Math.abs(this.desiredRotationInDegrees)<e&&(this.desiredRotationInDegrees=0)},e.prototype.setCurrentImage=function(e){e!==this.previousImageNumber&&this.isStarted&&(-1!==this.previousImageNumber&&s.DomUtilities.hideImage(this.images[this.previousImageNumber-1],this.window),s.DomUtilities.showImage(this.images[e-1],this.window),this.previousImageNumber=e,this.currentImageNumber=e,this.setCurrentDegree(e),this.options.enableChangeImageEvent&&this.events().changeImage({currentImage:this.images[e-1],currentDegree:this.currentDegree,completed:!0}))},e.prototype.viewerHasNoAction=function(){return!this.isDragged},e.prototype.getImages=function(){return i(this,void 0,void 0,(function(){return o(this,(function(e){return[2,a.Images.getPossibleImages(this.mainImage.src,this.getTotalFrames(),this.uniqueId,this.eventBus,this.options.imageUrlFormat,this.options.startFrameNo,this.options.imageUrls,this.window)]}))}))},e.prototype.getTotalFrames=function(){var e=this.options.totalFrames;if(e>0&&e<=360)return this.options.imageUrls.length>0?this.options.imageUrls.length:e;throw new f.default("totalFrames must be between 1 and 360 now "+e)},e.prototype.speedToRefreshRate=function(e){return(100-e)/2},e.prototype.getCurrentRefreshRate=function(){if(0===this.desiredRotationInDegrees)return this.standbyRefreshRate;if(this.viewerHasNoAction()&&this.useEasing){this.desiredRotationInDegreesStartSlowingDown||(this.desiredRotationInDegreesStartSlowingDown=Math.abs(this.desiredRotationInDegrees));var e=(1-(1-Math.abs(this.desiredRotationInDegrees)/this.desiredRotationInDegreesStartSlowingDown))*this.options.speed;return this.speedToRefreshRate(e)}return this.speedToRefreshRate(this.options.speed)},e.prototype.autoRotate=function(e){return i(this,void 0,void 0,(function(){var t=this;return o(this,(function(n){return this.nAutoRotations=e,[2,new Promise((function(n,r){return i(t,void 0,void 0,(function(){var t,i;return o(this,(function(o){switch(o.label){case 0:this.useEasing=!1,(t=this.options.autoRotateSpeed!==this.options.speed)&&this.setSpeed(this.options.autoRotateSpeed),i=0,o.label=1;case 1:return i<this.nAutoRotations?this.isDragged||this.nAutoRotations!==e?(r("auto rotate was interrupted"),t&&this.setSpeed(this.options.speed),[3,4]):(i===e-1&&(this.useEasing=!0),this.desiredRotationInDegrees=this.options.autoRotateReverse?-360:360,[4,this.updateImage()]):[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return t&&this.setSpeed(this.options.speed),this.nAutoRotations===e?n():r(),[2]}}))}))}))]}))}))},e}();t.JavascriptViewer=m},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Images=void 0;var o=n(0),a=n(5),s=function(){function e(){}return e.getFilename=function(e,t,n){if(0===t.length){var r=n.split(".").pop();if(void 0===r)throw new o.default("no extension found in url: "+n+", cannot generate other filenames");var i=(e<10?"0":"")+e.toString();return n.replace("."+r,"_"+i+"."+r)}var a=this.getImagesPath(n),s=this.getImagesPath(t)||a,u=t.lastIndexOf("/")+1;if(-1!==(t=t.substr(u)).toLowerCase().indexOf("xx")){i=(e<10?"0":"")+e.toString();return""+s+t.replace("xx",i)}if(-1!==t.toLowerCase().indexOf("x")){i=e.toString();return""+s+t.replace("x",i)}throw new o.default("no placeholder x or xx found in format: "+t)},e.generateImagesUrlsFromFormat=function(e,t,n,r){var i=[];if(0===e.length)return i;for(var o=n;r>i.length;o++)i.push(this.getFilename(o,t,e));return i},e.getPossibleImages=function(e,t,n,s,u,c,l,h){return r(this,void 0,void 0,(function(){var r=this;return i(this,(function(i){return[2,new Promise((function(i,d){var f=l.length>0?l:r.generateImagesUrlsFromFormat(e,u,c,t),p=f.map((function(e,t){return{src:e,id:n+t.toString(),sequence:t+1,encoded:""}})),g=1;a.default(f,h,{onSingleImageComplete:function(e){p[f.indexOf(e.url)].encoded="",s.loadImage({currentImage:g,totalImages:t,percentage:Math.round(g/t*100),image:p[g-1]}),g++},onSingleImageFail:function(e){throw console.log("Failed loading image, are you using a good imageUrlFormat? =>"+e),new o.default("Failed loading image, are you using a good imageUrlFormat? =>"+e)}}).then((function(){g-1===f.length?i(p):d("Not all images are loaded "+(g-1)+" from "+f.length+". \n                    Check the warning to see the image urls we are trying to fetch")})).catch((function(e){d(e)}))}))]}))}))},e.getMainImage=function(e,t){var n=t.document.getElementById(e);if(n instanceof HTMLImageElement)return{src:n.src,id:e,sequence:0};throw new o.default('Could not find main image with id "'+e+'"')},e.getMainImageElement=function(e,t){var n=t.document.getElementById(e);if(n instanceof HTMLImageElement)return n;throw new o.default('Could not find main image with id "'+e+'"')},e.blurMainImage=function(e,t){var n=t.document.getElementById(e);n instanceof HTMLImageElement&&(n.style.filter="blur(5px)")},e.createProgressBar=function(e,t,n){var r=t.document.createElement("div");r.style.display="flex",r.style.height="5px",r.style.width="30%",r.style.overflow="hidden",r.style.backgroundColor="#e9ecef",r.style.borderRadius="0.25rem",r.id="loader_"+e,r.style.position="absolute",r.style.zIndex="200",r.style.top=n.clientHeight/2+"px",r.style.marginLeft="auto",r.style.marginRight="auto",r.style.left="0",r.style.right="0";var i="https://www.360-javascriptviewer.com/?utm_source=presentation&utm_medium=preloader&utm_campaign="+t.location.hostname,o=t.document.createElement("a");o.text="360 javascript viewer",o.href=i,o.id="link_"+e,o.target="_blank",o.style.position="absolute",o.style.zIndex="200",o.style.top=n.clientHeight/2-15+"px",o.style.marginLeft="auto",o.style.marginRight="auto",o.style.left="0",o.style.right="0",o.style.width="30%",o.style.whiteSpace="nowrap",o.style.fontSize="10px",o.style.textAlign="center",o.style.color="#6a6d71",o.style.textDecoration="none";var a=t.document.createElement("div");return a.style.backgroundColor="#6a6d71",r.appendChild(a),n.appendChild(o),n.appendChild(r),[r,o]},e.getImagesPath=function(e){var t=e.replace(/^.*[\\/]/,"");return e.substring(0,e.length-t.length)},e}();t.Images=s},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return r(this,void 0,void 0,(function(){function t(e){return new Promise((function(t,r){var i=new Image;i.src=e,i.onload=function(o){i.naturalWidth<10?r():(n.onSingleImageComplete({result:"",url:e,status:200}),t())},i.onerror=function(){n.onSingleImageFail("failed loading "+e),r()}}))}var r,a,s;return i(this,(function(n){switch(n.label){case 0:r=0,a=function(e,t){for(var n=[],r=o(e),i=Math.ceil(r.length/t),a=0;a<i;a++)n.push(r.splice(0,t));return n}(e,10),n.label=1;case 1:return r<a.length?(s=a[r],[4,Promise.all(s.map(t))]):[3,4];case 2:n.sent(),n.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtilities=void 0;var o=n(0),a=function(){function e(){}return e.hideImage=function(e,t){var n=t.document.getElementById(e.id);n&&(n.style.display="none")},e.hideImageSlow=function(e,t){return r(this,void 0,void 0,(function(){var n=this;return i(this,(function(o){return[2,new Promise((function(o,a){return r(n,void 0,void 0,(function(){var n,s,u,c,l=this;return i(this,(function(h){switch(h.label){case 0:return n=0,s=function(e){return new Promise((function(t){return setTimeout(t,e)}))},null!==(u=t.document.getElementById(e.id))?[3,1]:(a(!1),[3,3]);case 1:return c=Array.from({length:100},(function(e,t){return t})).map((function(){return r(l,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,s(100)];case 1:return e.sent(),u.style.opacity=(1-n/100).toString(),n++,[2]}}))}))})),[4,Promise.all(c)];case 2:h.sent(),u.style.display="none",o(!0),h.label=3;case 3:return[2]}}))}))}))]}))}))},e.showImage=function(e,t){var n=t.document.getElementById(e.id);if(!n)throw"could not find element with id "+e.id;n.style.display="block",n.style.removeProperty("z-index"),n.style.removeProperty("width"),n.style.removeProperty("position"),n.style.removeProperty("opacity"),n.style.removeProperty("filter")},e.cleanImage=function(e,t){var n=t.document.getElementById(e.id);if(!n)throw console.log("err"),"clean could not find element with id "+e.id;n.style.display="none"},e.getImageHolderElement=function(e,t,n){var r=e.document.createElement("div");return r.style.padding="0",r.style.margin="0",r.style.position="relative",r.id=n,r},e.removeElement=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},e.getMainHolderElement=function(e,t){var n=t.document.getElementById(e);if(n instanceof HTMLDivElement)return n.style.position="relative",n;throw new o.default('Could not find main holder with id "'+e+'". Did you create an element like <div id="'+e+'"></div>')},e.getImageElement=function(e,t){var n=t.document.createElement("img");return n.src=e.src,n.id=e.id,n.style.userSelect="none",n.style.display="none",n.style.touchAction="none",n},e}();t.DomUtilities=a},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=["textarea","input"],s=function(){function e(e,t){var n=this;this.dragStarted=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.targets=[],this.prevTime=0,this.isDouble=!1,this.startRotate=0,this.onDragStart=function(e,t){if(void 0===t&&(t=!0),n.dragStarted||e.cancelable){var i=n.options,s=i.container,u=i.pinchOutside,c=i.dragstart,l=i.preventRightClick,h=i.preventDefault,d=i.checkInput;e instanceof MouseEvent&&e.preventDefault();var f=n.isTouch;if(!n.dragStarted){var p=document.activeElement,g=e.target,m=g.tagName.toLowerCase(),v=a.indexOf(m)>-1,y=g.isContentEditable;if(v||y){if(d||p===g)return!1;if(p&&y&&p.isContentEditable&&p.contains(g))return!1}else if((h||"touchstart"===e.type)&&p){var w=p.tagName;(p.isContentEditable||a.indexOf(w)>-1)&&p.blur()}}var b=0;if(!n.dragStarted&&f&&u&&(b=setTimeout((function(){o.addEvent(s,"touchstart",n.onDragStart,{passive:!1})}))),n.dragStarted&&f&&u&&o.removeEvent(s,"touchstart",n.onDragStart),f&&o.isMultiTouch(e)){if(clearTimeout(b),!n.dragStarted&&e.touches.length!==e.changedTouches.length)return;n.pinchFlag||n.onPinchStart(e)}if(!n.dragStarted){var _=n.startClients[0]?n.startClients:o.getPositionEvent(e);n.customDist=[0,0],n.dragStarted=!0,n.isDrag=!1,n.startClients=_,n.prevClients=_,n.datas={},n.movement=0;var E=o.getPosition(_[0],n.prevClients[0],n.startClients[0]);if(e instanceof MouseEvent&&l&&(3===e.which||2===e.button))return clearTimeout(b),n.initDrag(),!1;!1===(c&&c(r({type:"dragstart",datas:n.datas,inputEvent:e,isTrusted:t},E)))&&(clearTimeout(b),n.initDrag()),n.isDouble=o.now()-n.prevTime<200,n.dragStarted&&h&&e.preventDefault()}}},this.onDrag=function(e,t){if(!(e instanceof MouseEvent&&0===e.buttons)&&(!n.dragStarted&&1===e.buttons&&e instanceof MouseEvent&&n.onDragStart(e),n.dragStarted)){var i=o.getPositionEvent(e);n.pinchFlag&&n.onPinch(e,i);var a=n.move([0,0],e,i);if(a&&(a.deltaX||a.deltaY)){var s=n.options.drag;s&&s(r(r({},a),{isScroll:!!t,inputEvent:e}))}}},this.onDragEnd=function(e){if(n.dragStarted){n.dragStarted=!1;var t=n.options,i=t.dragend,a=t.pinchOutside,s=t.container;n.isTouch&&a&&o.removeEvent(s,"touchstart",n.onDragStart),n.pinchFlag&&n.onPinchEnd(e);var u=n.prevClients,c=n.startClients,l=n.pinchFlag?o.getPinchDragPosition(u,u,c,n.startPinchClients):o.getPosition(u[0],u[0],c[0]),h=o.now(),d=!n.isDrag&&n.isDouble;n.prevTime=n.isDrag||d?0:h,n.startClients=[],n.prevClients=[],i&&i(r({type:"dragend",datas:n.datas,isDouble:d,isDrag:n.isDrag,inputEvent:e},l))}},this.options=r({checkInput:!1,container:e.length>1?"undefined"!=typeof window?window:new HTMLDivElement:e[0],preventRightClick:!0,preventDefault:!0,pinchThreshold:0},t);var i=this.options,s=i.container,u=i.events;if(this.isTouch=u.indexOf("touch")>-1,this.isMouse=u.indexOf("mouse")>-1,this.customDist=[0,0],this.targets=e,this.isMouse&&(o.addEvent(s,"mousedown",this.onDragStart,{capture:!0}),o.addEvent(s,"mousemove",this.onDrag,{capture:!0}),o.addEvent(s,"mouseup",this.onDragEnd,{capture:!1}),o.addEvent(s,"contextmenu",this.onDragEnd,{capture:!1})),this.isTouch){var c={passive:!0};e.forEach((function(e){o.addEvent(e,"touchstart",n.onDragStart,c)})),o.addEvent(s,"touchmove",this.onDrag,c),o.addEvent(s,"touchend",this.onDragEnd,c),o.addEvent(s,"touchcancel",this.onDragEnd,c)}}return e.prototype.move=function(e,t,n){var i=e[0],a=e[1];void 0===n&&(n=this.prevClients);var s=this.customDist,u=this.prevClients,c=this.startClients,l=this.pinchFlag?o.getPinchDragPosition(n,u,c,this.startPinchClients):o.getPosition(n[0],u[0],c[0]);s[0]+=i,s[1]+=a,l.deltaX+=i,l.deltaY+=a;var h=l.deltaX,d=l.deltaY;return l.distX+=s[0],l.distY+=s[1],this.movement+=Math.sqrt(h*h+d*d),this.prevClients=n,this.isDrag=!0,r(r({type:"drag",datas:this.datas},l),{movement:this.movement,isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},e.prototype.onPinchStart=function(e){var t,n,a=this.options,s=a.pinchstart,u=a.pinchThreshold;if(!(this.isDrag&&this.movement>u)){var c=o.getClients(e.changedTouches);if(this.pinchFlag=!0,(t=this.startClients).push.apply(t,c),(n=this.prevClients).push.apply(n,c),this.startDistance=o.getDist(this.prevClients),this.startPinchClients=i(this.prevClients),s){var l=this.prevClients,h=o.getAverageClient(l),d=o.getPosition(h,h,h);this.startRotate=o.getRotation(l),s(r(r({type:"pinchstart",datas:this.datas,angle:this.startRotate,touches:o.getPositions(l,l,l)},d),{inputEvent:e}))}}},e.prototype.onPinch=function(e,t){if(this.dragStarted&&this.pinchFlag&&!(t.length<2)){this.isPinch=!0;var n=this.options.pinch;if(n){var i=this.prevClients,a=this.startClients,s=o.getPosition(o.getAverageClient(t),o.getAverageClient(i),o.getAverageClient(a)),u=o.getRotation(t),c=o.getDist(t);n(r(r({type:"pinch",datas:this.datas,movement:this.movement,angle:u,rotation:u-this.startRotate,touches:o.getPositions(t,i,a),scale:c/this.startDistance,distance:c},s),{inputEvent:e}))}}},e.prototype.onPinchEnd=function(e){if(this.dragStarted&&this.pinchFlag){var t=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.options.pinchend;if(n){var i=this.prevClients,a=this.startClients,s=o.getPosition(o.getAverageClient(i),o.getAverageClient(i),o.getAverageClient(a));n(r(r({type:"pinchend",datas:this.datas,isPinch:t,touches:o.getPositions(i,i,a)},s),{inputEvent:e})),this.isPinch=!1,this.pinchFlag=!1}}},e.prototype.triggerDragStart=function(e){this.onDragStart(e,!1)},e.prototype.unset=function(){var e=this,t=this.targets,n=this.options.container;this.isMouse&&(t.forEach((function(t){o.removeEvent(t,"mousedown",e.onDragStart)})),o.removeEvent(n,"mousemove",this.onDrag),o.removeEvent(n,"mouseup",this.onDragEnd),o.removeEvent(n,"contextmenu",this.onDragEnd)),this.isTouch&&(t.forEach((function(t){o.removeEvent(t,"touchstart",e.onDragStart)})),o.removeEvent(n,"touchstart",this.onDragStart),o.removeEvent(n,"touchmove",this.onDrag),o.removeEvent(n,"touchend",this.onDragEnd),o.removeEvent(n,"touchcancel",this.onDragEnd))},e.prototype.initDrag=function(){this.startClients=[],this.prevClients=[],this.dragStarted=!1},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i={loadImage:r.slot(),started:r.slot(),startDragging:r.slot(),changeImage:r.slot(),endAutoRotate:r.slot(),click:r.slot(),pinch:r.slot(),scroll:r.slot()};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.bar=t,this.p=e,this.refresh()}return e.prototype.refresh=function(){this.bar.style.width=this.p+"%"},e.prototype.update=function(e){this.p=e,this.refresh()},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultZoom=void 0;var r=n(11),i=function(){function e(e,t,n){this.panzoomLoaded=!1,this.currentZoomScale=1,this.window=e,this.images=t,this.mainHolderElement=n,this.initPanZoom()}return e.prototype.initPanZoom=function(){var e=this;this.images.forEach((function(t,n){var r,i=null===(r=e.window)||void 0===r?void 0:r.document.getElementById(""+t.id);i&&(e.images[n].pz=e.getMobilePanzoom(i))})),this.panzoomLoaded=!0},e.prototype.handleZoom=function(e,t,n){var r=this,i=!1;this.currentZoomScale+=e,this.currentZoomScale<1.2&&this.currentZoomScale>.8&&e<0&&(t=0,n=0,i=!0),this.images.forEach((function(e){var o,a;i?null===(a=e.pz)||void 0===a||a.reset({animate:!0}):null===(o=e.pz)||void 0===o||o.zoom(r.currentZoomScale,{animate:!0,focal:{x:t,y:n}})}))},e.prototype.getMobilePanzoom=function(e){return r.default(e,{origin:"0 0",maxScale:2,minScale:1,startX:0,startY:0,animate:!0,canvas:!1,noBind:!0,disablePan:!1})},e.prototype.getRelativePosition=function(e,t){var n,r=0,i=0,o=null===(n=this.mainHolderElement)||void 0===n?void 0:n.getBoundingClientRect();if(o){var a=this.window.pageXOffset+(null==o?void 0:o.left),s=this.window.pageYOffset+(null==o?void 0:o.top);return[r=Math.round(e-a),i=Math.round(t-s)]}return[r,i]},e.prototype.pinch=function(e){if(this.panzoomLoaded){var t=e.scale-this.currentZoomScale,n=(e.originalEvent.targetTouches[0].pageX+e.originalEvent.targetTouches[1].pageX)/2,r=(e.originalEvent.targetTouches[0].pageY+e.originalEvent.targetTouches[1].pageY)/2,i=this.getRelativePosition(n,r),o=i[0],a=i[1];this.handleZoom(t,o,a)}},e.prototype.scroll=function(e){var t=-.001*e.originalEvent.deltaY,n=e.originalEvent,r=this.getRelativePosition(n.pageX,n.pageY),i=r[0],o=r[1];this.handleZoom(t,i,o)},e}();t.DefaultZoom=i},function(e,t,n){"use strict";n.r(t);
    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t){for(var n=e.length;n--;)if(e[n].pointerId===t.pointerId)return n;return-1}function o(e,t){var n;if(t.touches){n=0;for(var r=0,a=t.touches;r<a.length;r++){var s=a[r];s.pointerId=n++,o(e,s)}}else(n=i(e,t))>-1&&e.splice(n,1),e.push(t)}function a(e){for(var t,n=(e=e.slice(0)).pop();t=e.pop();)n={clientX:(t.clientX-n.clientX)/2+n.clientX,clientY:(t.clientY-n.clientY)/2+n.clientY};return n}function s(e){if(e.length<2)return 0;var t=e[0],n=e[1];return Math.sqrt(Math.pow(Math.abs(n.clientX-t.clientX),2)+Math.pow(Math.abs(n.clientY-t.clientY),2))}"undefined"!=typeof window&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}));var u={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};function c(e,t,n,r){u[e].split(" ").forEach((function(e){t.addEventListener(e,n,r)}))}function l(e,t,n){u[e].split(" ").forEach((function(e){t.removeEventListener(e,n)}))}"undefined"!=typeof window&&("function"==typeof window.PointerEvent?u={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:"function"==typeof window.TouchEvent&&(u={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));var h,d="undefined"!=typeof document&&!!document.documentMode;function f(){return h||(h=document.createElement("div").style)}var p=["webkit","moz","ms"],g={};function m(e){if(g[e])return g[e];var t=f();if(e in t)return g[e]=e;for(var n=e[0].toUpperCase()+e.slice(1),r=p.length;r--;){var i=""+p[r]+n;if(i in t)return g[e]=i}}function v(e,t){return parseFloat(t[m(e)])||0}function y(e,t,n){void 0===n&&(n=window.getComputedStyle(e));var r="border"===t?"Width":"";return{left:v(t+"Left"+r,n),right:v(t+"Right"+r,n),top:v(t+"Top"+r,n),bottom:v(t+"Bottom"+r,n)}}function w(e,t,n){e.style[m(t)]=n}function b(e){var t=e.parentNode,n=window.getComputedStyle(e),r=window.getComputedStyle(t),i=e.getBoundingClientRect(),o=t.getBoundingClientRect();return{elem:{style:n,width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right,margin:y(e,"margin",n),border:y(e,"border",n)},parent:{style:r,width:o.width,height:o.height,top:o.top,bottom:o.bottom,left:o.left,right:o.right,padding:y(t,"padding",r),border:y(t,"border",r)}}}function _(e,t){return 1===e.nodeType&&(" "+function(e){return(e.getAttribute("class")||"").trim()}(e)+" ").indexOf(" "+t+" ")>-1}var E=/^http:[\w\.\/]+svg$/;var I={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(e){e.preventDefault(),e.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,relative:!1,setTransform:function(e,t,n){var r=t.x,i=t.y,o=t.scale,a=t.isSVG;if(w(e,"transform","scale("+o+") translate("+r+"px, "+i+"px)"),a&&d){var s=window.getComputedStyle(e).getPropertyValue("transform");e.setAttribute("transform",s)}},startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function D(e,t){if(!e)throw new Error("Panzoom requires an element as an argument");if(1!==e.nodeType)throw new Error("Panzoom requires an element with a nodeType of 1");if(!function(e){var t=e.ownerDocument,n=e.parentNode;return t&&n&&9===t.nodeType&&1===n.nodeType&&t.documentElement.contains(n)}(e))throw new Error("Panzoom should be called on elements that have been attached to the DOM");t=r(r({},I),t);var n=function(e){return E.test(e.namespaceURI)&&"svg"!==e.nodeName.toLowerCase()}(e),h=e.parentNode;h.style.overflow=t.overflow,h.style.userSelect="none",h.style.touchAction=t.touchAction,(t.canvas?h:e).style.cursor=t.cursor,e.style.userSelect="none",e.style.touchAction=t.touchAction,w(e,"transformOrigin","string"==typeof t.origin?t.origin:n?"0 0":"50% 50%");var d,f,p,g,v,y,D=0,P=0,C=1,R=!1;function S(t,n,r){if(!r.silent){var i=new CustomEvent(t,{detail:n});e.dispatchEvent(i)}}function k(t,r){var i={x:D,y:P,scale:C,isSVG:n};return requestAnimationFrame((function(){"boolean"==typeof r.animate&&(r.animate?function(e,t){w(e,"transition",m("transform")+" "+t.duration+"ms "+t.easing)}(e,r):w(e,"transition","none")),r.setTransform(e,i,r)})),S(t,i,r),S("panzoomchange",i,r),i}function O(){if(t.contain){var n=b(e),r=n.parent.width-n.parent.border.left-n.parent.border.right,i=n.parent.height-n.parent.border.top-n.parent.border.bottom,o=r/(n.elem.width/C),a=i/(n.elem.height/C);"inside"===t.contain?t.maxScale=Math.min(o,a):"outside"===t.contain&&(t.minScale=Math.max(o,a))}}function x(n,i,o,a){var s=r(r({},t),a),u={x:D,y:P,opts:s};if(!s.force&&(s.disablePan||s.panOnlyWhenZoomed&&C===s.startScale))return u;if(n=parseFloat(n),i=parseFloat(i),s.disableXAxis||(u.x=(s.relative?D:0)+n),s.disableYAxis||(u.y=(s.relative?P:0)+i),"inside"===s.contain){var c=b(e);u.x=Math.max(-c.elem.margin.left-c.parent.padding.left,Math.min(c.parent.width-c.elem.width/o-c.parent.padding.left-c.elem.margin.left-c.parent.border.left-c.parent.border.right,u.x)),u.y=Math.max(-c.elem.margin.top-c.parent.padding.top,Math.min(c.parent.height-c.elem.height/o-c.parent.padding.top-c.elem.margin.top-c.parent.border.top-c.parent.border.bottom,u.y))}else if("outside"===s.contain){var l=(c=b(e)).elem.width/C,h=c.elem.height/C,d=l*o,f=h*o,p=(d-l)/2,g=(f-h)/2,m=(-(d-c.parent.width)-c.parent.padding.left-c.parent.border.left-c.parent.border.right+p)/o,v=(p-c.parent.padding.left)/o;u.x=Math.max(Math.min(u.x,v),m);var y=(-(f-c.parent.height)-c.parent.padding.top-c.parent.border.top-c.parent.border.bottom+g)/o,w=(g-c.parent.padding.top)/o;u.y=Math.max(Math.min(u.y,w),y)}return u}function A(e,n){var i=r(r({},t),n),o={scale:C,opts:i};return!i.force&&i.disableZoom||(o.scale=Math.min(Math.max(e,i.minScale),i.maxScale)),o}function M(e,t,n){var r=x(e,t,C,n),i=r.opts;return D=r.x,P=r.y,k("panzoompan",i)}function T(e,t){var n=A(e,t),r=n.opts;if(r.force||!r.disableZoom){e=n.scale;var i=D,o=P;if(r.focal){var a=r.focal;i=(a.x/e-a.x/C+D*e)/e,o=(a.y/e-a.y/C+P*e)/e}var s=x(i,o,e,{relative:!1,force:!0});return D=s.x,P=s.y,C=e,k("panzoomzoom",r)}}function j(e,n){var i=r(r(r({},t),{animate:!0}),n);return T(C*Math.exp((e?1:-1)*i.step),i)}function N(t,i,o){var a=b(e),s=a.parent.width-a.parent.padding.left-a.parent.padding.right-a.parent.border.left-a.parent.border.right,u=a.parent.height-a.parent.padding.top-a.parent.padding.bottom-a.parent.border.top-a.parent.border.bottom,c=i.clientX-a.parent.left-a.parent.padding.left-a.parent.border.left-a.elem.margin.left,l=i.clientY-a.parent.top-a.parent.padding.top-a.parent.border.top-a.elem.margin.top;n||(c-=a.elem.width/C/2,l-=a.elem.height/C/2);var h={x:c/s*(s*t),y:l/u*(u*t)};return T(t,r(r({animate:!1},o),{focal:h}))}T(t.startScale,{animate:!1}),setTimeout((function(){O(),M(t.startX,t.startY,{animate:!1})}));var H=[];function B(e){if(!function(e,t){for(var n=e;null!=n;n=n.parentNode)if(_(n,t.excludeClass)||t.exclude.indexOf(n)>-1)return!0;return!1}(e.target,t)){o(H,e),R=!0,t.handleStartEvent(e),d=D,f=P,S("panzoomstart",{x:D,y:P,scale:C},t);var n=a(H);p=n.clientX,g=n.clientY,v=C,y=s(H)}}function X(e){if(R&&void 0!==d&&void 0!==f&&void 0!==p&&void 0!==g){o(H,e);var n=a(H);if(H.length>1)N(A((s(H)-y)*t.step/80+v).scale,n);M(d+(n.clientX-p)/C,f+(n.clientY-g)/C,{animate:!1})}}function Y(e){1===H.length&&S("panzoomend",{x:D,y:P,scale:C},t),function(e,t){if(t.touches)for(;e.length;)e.pop();else{var n=i(e,t);n>-1&&e.splice(n,1)}}(H,e),R&&(R=!1,d=f=p=g=void 0)}var z=!1;function F(){z||(z=!0,c("down",t.canvas?h:e,B),c("move",document,X,{passive:!0}),c("up",document,Y,{passive:!0}))}return t.noBind||F(),{bind:F,destroy:function(){z=!1,l("down",t.canvas?h:e,B),l("move",document,X),l("up",document,Y)},eventNames:u,getPan:function(){return{x:D,y:P}},getScale:function(){return C},getOptions:function(){return function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(t)},pan:M,reset:function(e){var n=r(r(r({},t),{animate:!0,force:!0}),e);C=A(n.startScale,n).scale;var i=x(n.startX,n.startY,C,n);return D=i.x,P=i.y,k("panzoomreset",n)},setOptions:function(n){for(var r in void 0===n&&(n={}),n)n.hasOwnProperty(r)&&(t[r]=n[r]);n.hasOwnProperty("cursor")&&(e.style.cursor=n.cursor),n.hasOwnProperty("overflow")&&(h.style.overflow=n.overflow),n.hasOwnProperty("touchAction")&&(h.style.touchAction=n.touchAction,e.style.touchAction=n.touchAction),(n.hasOwnProperty("minScale")||n.hasOwnProperty("maxScale")||n.hasOwnProperty("contain"))&&O()},setStyle:function(t,n){return w(e,t,n)},zoom:T,zoomIn:function(e){return j(!0,e)},zoomOut:function(e){return j(!1,e)},zoomToPoint:N,zoomWithWheel:function(e,n){e.preventDefault();var i=r(r({},t),n),o=(0===e.deltaY&&e.deltaX?e.deltaX:e.deltaY)<0?1:-1;return N(A(C*Math.exp(o*i.step/3),i).scale,e,i)}}}D.defaultOptions=I,t.default=D}])}));